<!doctype html>
<html lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title id="pageTitle">æ©Ÿæ§‹æ¨¡æ“¬å·¥å…·</title>
    <link rel="stylesheet" href="css/styles.css" />
    <style>
        /* Template-specific styles */
        .nav-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
            margin: -16px -16px 16px -16px;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-back {
            color: white;
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-title {
            color: white;
            margin: 0;
            font-size: 18px;
        }

        .mechanism-icon {
            font-size: 24px;
        }
    </style>
</head>

<body>
    <!-- Navigation Header -->
    <div class="nav-header">
        <div class="nav-content">
            <div>
                <a href="index.html" class="nav-back">
                    <span style="font-size: 20px;">â†</span>
                    <span>è¿”å›æ©Ÿæ§‹é¸å–®</span>
                </a>
            </div>
            <h2 class="nav-title">
                <span class="mechanism-icon" id="mechIcon">ğŸ”—</span>
                <span id="mechName">æ©Ÿæ§‹è¨­è¨ˆ</span>
            </h2>
            <div style="width: 100px;"></div>
        </div>
    </div>

    <div class="row">
        <!-- Left Panel: Parameters -->
        <div class="card">
            <!-- Mechanism-specific parameters will be injected here -->
            <div id="parametersPanel"></div>

            <!-- Common: Animation Controls -->
            <div style="height:10px"></div>
            <h3>â‘¡ å‹•ç•«æ§åˆ¶</h3>
            <div class="grid">
                <div>
                    <label>å‹•ç•«é€Ÿåº¦ï¼ˆRPMï¼‰</label>
                    <input id="animSpeed" type="number" min="1" max="120" step="1" value="10" />
                </div>
                <div class="flex-end">
                    <button id="btnPlayAnim" class="btn-play" style="flex:1;">â–¶ æ’­æ”¾</button>
                    <button id="btnPauseAnim" class="btn-pause" style="flex:1;" disabled>â¸ æš«åœ</button>
                    <button id="btnStopAnim" class="btn-stop" style="flex:1;" disabled>â¹ åœæ­¢</button>
                </div>
            </div>

            <!-- Common: Part Specifications -->
            <div style="height:10px"></div>
            <h3>â‘¢ æ¡¿ä»¶å¤–å½¢</h3>
            <div id="partSpecsPanel"></div>

            <!-- Common: Machining Parameters -->
            <div style="height:10px"></div>
            <h3>â‘£ åŠ å·¥è¨­å®šï¼ˆGRBL / 3018ï¼‰</h3>
            <div class="grid">
                <div>
                    <label>å·¥ä½œç¯„åœ Xï¼ˆmmï¼‰</label>
                    <input id="workX" type="number" value="300" />
                </div>
                <div>
                    <label>å·¥ä½œç¯„åœ Yï¼ˆmmï¼‰</label>
                    <input id="workY" type="number" value="180" />
                </div>
                <div>
                    <label>åˆ€å¾‘ï¼ˆmmï¼‰</label>
                    <input id="toolD" type="number" min="0.5" max="10" step="0.1" value="3.0" />
                </div>
                <div>
                    <label>ææ–™åšåº¦ Tï¼ˆmmï¼‰</label>
                    <input id="thickness" type="number" min="1" max="30" step="0.1" value="3.0" />
                </div>
                <div>
                    <label>ç©¿é€é¤˜é‡ï¼ˆmmï¼‰</label>
                    <input id="overcut" type="number" min="0" max="2" step="0.1" value="0.5" />
                </div>
                <div>
                    <label>æ¯å±¤ä¸‹åˆ€ stepdownï¼ˆmmï¼‰</label>
                    <input id="stepdown" type="number" min="0.1" max="5" step="0.1" value="0.5" />
                </div>
                <div>
                    <label>SAFE_Zï¼ˆmmï¼‰</label>
                    <input id="safeZ" type="number" min="1" max="30" step="0.5" value="5" />
                </div>
                <div>
                    <label>Feed XYï¼ˆmm/minï¼‰</label>
                    <input id="feedXY" type="number" min="50" max="3000" step="10" value="400" />
                </div>
                <div>
                    <label>Feed Zï¼ˆmm/minï¼‰</label>
                    <input id="feedZ" type="number" min="30" max="2000" step="10" value="100" />
                </div>
                <div>
                    <label>ä¸»è»¸ Sï¼ˆå¯ç©ºç™½ï¼‰</label>
                    <input id="spindle" type="number" min="1000" max="30000" step="100" placeholder="ä¾‹å¦‚ 12000" />
                </div>
            </div>

            <div class="btnrow">
                <button id="btnGen">ç”Ÿæˆ G-code</button>
            </div>

            <div style="height:10px"></div>
            <div class="note">
                <div class="warn">æ³¨æ„ï¼šv0.1 ä¸å« tabsã€‚å¤–å½¢åˆ‡å®Œé›¶ä»¶å¯èƒ½é¬†è„«ï¼Œè«‹ç”¨é›™é¢è† /å£“æ¿å›ºå®šã€‚</div>
                <div>é è¨­ï¼šG21 / G90 / SAFE_Z å…ˆæŠ¬åˆ€ã€å…ˆé‘½å­”å¾Œå¤–å½¢ã€å¤šå±¤ stepdownã€‚</div>
            </div>

            <div style="height:10px"></div>
            <h3>è¼¸å‡º / è¨Šæ¯</h3>
            <div id="log" class="card" style="padding:10px; background:#fafafa;"></div>
            <div class="btnrow" id="dlButtons"></div>
        </div>

        <!-- Right Panel: Visualization -->
        <div>
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <h3 style="margin:0;">2D æ¨¡æ“¬</h3>
                    <button class="primary" id="btnUpdate">æ›´æ–°æ¨¡æ“¬ / é è¦½</button>
                </div>
                <div id="svgWrap"></div>
                <div class="note" style="margin-top:8px;" id="simNotes">
                    <!-- Mechanism-specific notes -->
                </div>
            </div>

            <div class="card" style="margin-top:16px;">
                <h3>é›¶ä»¶æ’ç‰ˆé è¦½</h3>
                <div id="partsWrap"></div>
                <div class="note" style="margin-top:8px;">
                    é›¶ä»¶æ’ç‰ˆåœ¨å·¥ä½œå€ï¼ˆ0..X, 0..Yï¼‰ï¼Œæ¯æ ¹å„è‡ªè¼¸å‡ºä¸€ä»½ G-codeã€‚
                </div>
            </div>
        </div>
    </div>

    <!-- Mechanism-specific script will be loaded dynamically -->
    <script type="module" id="mechanismScript"></script>
</body>

</html>