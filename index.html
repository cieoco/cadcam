<!doctype html>
<html lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>æ©Ÿæ§‹å¿«é€ŸåŸå‹å·¥å…·ï¼ˆMVPï¼‰</title>
    <style>
        :root {
            --bg: #0b0c10;
            --card: #12141a;
            --card2: #0f1117;
            --text: #e9ecf1;
            --muted: #a8b0c0;
            --line: #2a2f3a;
            --ok: #19c37d;
            --warn: #ffcc00;
            --bad: #ff4d4d;
            --btn: #1f2430;
            --btn2: #1a1f2a;
            --shadow: 0 10px 30px rgba(0, 0, 0, .35);
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            color: var(--text);
            background: radial-gradient(1200px 800px at 20% 10%, #14172b 0%, var(--bg) 55%);
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans TC", "PingFang TC";
        }

        a {
            color: inherit;
        }

        .wrap {
            max-width: 1100px;
            margin: 0 auto;
            padding: 22px 18px 46px;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            padding: 10px 2px 18px;
            border-bottom: 1px solid rgba(255, 255, 255, .06);
        }

        .brand {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .brand h1 {
            margin: 0;
            font-size: 20px;
            letter-spacing: .2px;
        }

        .brand p {
            margin: 0;
            color: var(--muted);
            font-size: 13px;
            line-height: 1.35;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, .10);
            border-radius: 999px;
            background: rgba(255, 255, 255, .04);
            font-size: 12px;
            color: var(--muted);
        }

        .pill b {
            color: var(--text);
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: 1.2fr .8fr;
            gap: 16px;
            margin-top: 18px;
        }

        @media (max-width: 980px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, .05) 0%, rgba(255, 255, 255, .02) 100%);
            border: 1px solid rgba(255, 255, 255, .08);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .card .hd {
            padding: 14px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            background: rgba(0, 0, 0, .18);
            border-bottom: 1px solid rgba(255, 255, 255, .07);
        }

        .card .hd h2 {
            margin: 0;
            font-size: 14px;
            letter-spacing: .2px;
        }

        .card .hd .step {
            font-size: 12px;
            color: var(--muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .card .bd {
            padding: 14px 16px 16px;
        }

        .hint {
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, .10);
            background: rgba(0, 0, 0, .18);
            color: var(--muted);
            font-size: 12px;
            line-height: 1.45;
        }

        .hint strong {
            color: var(--text);
            font-weight: 600;
        }

        .chips {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .chip {
            flex: 1 1 180px;
            padding: 12px 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .10);
            background: rgba(0, 0, 0, .12);
            cursor: pointer;
            user-select: none;
            transition: transform .08s ease, border-color .12s ease, background .12s ease;
            min-width: 180px;
        }

        .chip:hover {
            transform: translateY(-1px);
            border-color: rgba(255, 255, 255, .20);
        }

        .chip.active {
            border-color: rgba(25, 195, 125, .6);
            background: rgba(25, 195, 125, .10);
        }

        .chip .t {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chip .d {
            font-size: 12px;
            color: var(--muted);
            line-height: 1.35;
        }

        .mini {
            font-size: 12px;
            color: var(--muted);
        }

        .list {
            margin: 10px 0 0;
            padding: 0 0 0 16px;
            color: var(--muted);
            font-size: 12px;
            line-height: 1.5;
        }

        .list b {
            color: var(--text);
            font-weight: 600;
        }

        .rec {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 12px;
        }

        .recCard {
            padding: 12px 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .10);
            background: rgba(0, 0, 0, .12);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .recTop {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 10px;
        }

        .recTop .name {
            font-weight: 800;
            font-size: 13px;
            letter-spacing: .1px;
        }

        .badge {
            font-size: 11px;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .12);
            color: var(--muted);
            background: rgba(255, 255, 255, .04);
            white-space: nowrap;
        }

        .recCard .why {
            font-size: 12px;
            color: var(--muted);
            line-height: 1.45;
        }

        .kv {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .kv .box {
            padding: 10px 10px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, .08);
            background: rgba(0, 0, 0, .12);
            font-size: 12px;
            color: var(--muted);
            line-height: 1.45;
        }

        .kv .box strong {
            color: var(--text);
            font-weight: 700;
            display: block;
            margin-bottom: 4px;
        }

        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .btn {
            appearance: none;
            border: 1px solid rgba(255, 255, 255, .12);
            background: var(--btn);
            color: var(--text);
            padding: 10px 12px;
            border-radius: 14px;
            cursor: pointer;
            font-weight: 700;
            font-size: 12px;
            transition: transform .08s ease, border-color .12s ease, background .12s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-1px);
            border-color: rgba(255, 255, 255, .22);
        }

        .btn.primary {
            background: rgba(25, 195, 125, .14);
            border-color: rgba(25, 195, 125, .55);
        }

        .btn.ghost {
            background: var(--btn2);
        }

        .btn:disabled {
            opacity: .5;
            cursor: not-allowed;
            transform: none;
        }

        .rightCol {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .meter {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .meterRow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .bar {
            height: 10px;
            border-radius: 999px;
            background: rgba(255, 255, 255, .08);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, .08);
        }

        .bar>div {
            height: 100%;
            width: 0%;
            background: rgba(25, 195, 125, .9);
            transition: width .2s ease;
        }

        .tag {
            font-size: 12px;
            color: var(--muted);
        }

        .footer {
            margin-top: 18px;
            color: var(--muted);
            font-size: 12px;
            line-height: 1.6;
            border-top: 1px solid rgba(255, 255, 255, .06);
            padding-top: 14px;
        }

        .mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        }

        .callout {
            padding: 12px 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .10);
            background: rgba(0, 0, 0, .16);
            color: var(--muted);
            font-size: 12px;
            line-height: 1.5;
        }

        .callout strong {
            color: var(--text);
            font-weight: 700;
        }

        .smallGrid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <div class="brand">
                <h1>æ©Ÿæ§‹å¿«é€ŸåŸå‹å·¥å…·ï¼ˆMVPï¼‰</h1>
                <p>å…ˆå®šé‹å‹• â†’ é¸æ©Ÿæ§‹ â†’ é¸è‡´å‹•å™¨ â†’ æœ€å¾Œæ‰åšå·¥ç¨‹ç²—ä¼°èˆ‡åŠ å·¥ï¼ˆGRBL / 3018ï¼‰ã€‚</p>
            </div>
            <div class="pill">
                Target: <b>GRBL</b> Â· Work: <b>3018 (300Ã—180)</b> Â· Mode: <b>Prototype</b>
            </div>
        </header>

        <div class="grid">
            <!-- LEFT: Wizard -->
            <div class="card">
                <div class="hd">
                    <h2>Step 1 â†’ 2 â†’ 3 â†’ 4ï¼ˆé¦–é å°å¼•ï¼‰</h2>
                    <div class="step"><span class="mono">v0.1</span> Â· å››é€£æ¡¿å·²å¯ç”¨</div>
                </div>
                <div class="bd">
                    <!-- Step 1 -->
                    <div class="hint">
                        <strong>Step 1ï½œå…ˆé¸ã€Œé‹å‹•å‹æ…‹ã€</strong><br />
                        å·¥ç¨‹åŸå‰‡ï¼šå…ˆå®šé‹å‹•å‹æ…‹ï¼Œæ¯”å…ˆé¸é¦¬é”æ›´é‡è¦ï¼Œé¿å…ã€Œèƒ½å‹•ä½†æ–¹å‘ä¸å°ã€ã€‚
                    </div>

                    <div class="chips" id="motionChips">
                        <div class="chip" data-motion="swing">
                            <div class="t">ğŸŸ¦ æ“ºå‹•</div>
                            <div class="d">æœ«ç«¯éœ€è¦è½‰/æ“ºè§’ï¼ˆå¤¾çˆªã€æ“ºè‡‚ã€æŠ¬å‡ï¼‰</div>
                        </div>
                        <div class="chip" data-motion="linear">
                            <div class="t">ğŸŸ© ç›´ç·š</div>
                            <div class="d">æœ«ç«¯éœ€è¦æ¨/æ‹‰ï¼ˆæ¨æ¡¿ã€æ»‘å¡Šã€ç›´ç·šè¡Œç¨‹ï¼‰</div>
                        </div>
                        <div class="chip" data-motion="recip">
                            <div class="t">ğŸŸ¨ å¾€å¾©</div>
                            <div class="d">ä¾†å›é€±æœŸå‹•ä½œï¼ˆé€æ–™ã€æ‰“æ“Šã€å¾€å¾©æ¨æ‹‰ï¼‰</div>
                        </div>
                        <div class="chip" data-motion="translate">
                            <div class="t">ğŸŸ¥ å¹³ç§»</div>
                            <div class="d">æ•´é«”å¹³ç§»/XYï¼ˆæ»‘å°ã€å‡é™å¹³å°ã€å®šä½æ¬ç§»ï¼‰</div>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div style="height:14px"></div>
                    <div class="hint">
                        <strong>Step 2ï½œæ¨è–¦ã€Œæœ€è‡ªç„¶çš„æ©Ÿæ§‹ã€</strong><br />
                        ç³»çµ±æœƒä¾é‹å‹•å‹æ…‹çµ¦ 1â€“3 å€‹å€™é¸ã€‚ç¬¬ä¸€ç‰ˆå…ˆæŠŠã€Œæ¡¿ä»¶åŒ–ã€åšå¼·ï¼šå¥½ç®—ã€å¥½åˆ‡ã€å¥½æ”¹ã€‚
                    </div>

                    <div class="rec" id="mechRecs"></div>

                    <!-- Step 3 -->
                    <div style="height:14px"></div>
                    <div class="hint">
                        <strong>Step 3ï½œå†é¸è‡´å‹•å™¨ï¼ˆæ±ºç­–æ¨¹ï¼‰</strong><br />
                        å…ˆåˆ¤æ–·ã€Œé€£çºŒæ§åˆ¶ vs å…©æ®µå¼ã€ï¼Œå†çœ‹ã€Œè¦å®šä½è§’åº¦/ä½ç½®å—ã€ï¼Œæœ€å¾Œæ‰è«‡å¿«/ç©©ã€‚
                    </div>

                    <div class="smallGrid" id="actuatorBox"></div>

                    <!-- Step 4 -->
                    <div style="height:14px"></div>
                    <div class="hint">
                        <strong>Step 4ï½œæœ€å¾Œæ‰åšå·¥ç¨‹ç²—ä¼°ï¼ˆSanity Checkï¼‰</strong><br />
                        é€™è£¡ä¸æ˜¯åšå®Œæ•´ CAEï¼Œè€Œæ˜¯åšã€Œé˜²å‘†ã€ï¼šå¹¾ä½•é †ä¸é †ã€è¡Œç¨‹åˆç†ä¸åˆç†ã€åŠ å·¥æ˜¯å¦å®‰å…¨ã€‚
                    </div>

                    <div class="kv">
                        <div class="box">
                            <strong>å°ºå¯¸ / è¡Œç¨‹æª¢æŸ¥</strong>
                            çœ‹è»Œè·¡æ˜¯å¦è¶…å‡ºå·¥ä½œç¯„åœã€æ˜¯å¦æœ‰æ­»é»ã€æ˜¯å¦å°æ‡‰åˆ°ä½ è¦çš„è¡Œç¨‹ã€‚
                        </div>
                        <div class="box">
                            <strong>åŠ å·¥å®‰å…¨æª¢æŸ¥</strong>
                            GRBLï¼šG21/G90ã€SAFE_Zã€å…ˆå­”å¾Œå¤–å½¢ã€stepdown åˆ†å±¤ï¼›v0.1 ä¸å« tabsï¼ˆéœ€å›ºå®šå·¥ä»¶ï¼‰ã€‚
                        </div>
                    </div>

                </div>
            </div>

            <!-- RIGHT: Engineering quick notes -->
            <div class="rightCol">
                <div class="card">
                    <div class="hd">
                        <h2>å·¥ç¨‹æç¤ºï¼ˆé¦–é å¸¸é§ï¼‰</h2>
                        <div class="step">Prototype-first</div>
                    </div>
                    <div class="bd">
                        <ul class="list">
                            <li><b>å…ˆè®“å¹¾ä½•é †</b>ï¼ˆä¸å¡ã€è¡Œç¨‹åˆç†ï¼‰å†è«‡æ§åˆ¶ï¼ˆPID/é€Ÿåº¦ï¼‰ã€‚</li>
                            <li>åŸå‹éšæ®µé‡é»æ˜¯ <b>å¯é æœŸã€å¯é‡è¤‡</b>ï¼šå°‘é¸é …ã€å°‘é­”æ³•ã€å…ˆæŠŠæµç¨‹è·‘é€šã€‚</li>
                            <li>æœ¨æ¿åŠ å·¥ï¼šå…ˆä¿å®ˆï¼ˆ<b>stepdown 0.5mm</b>ã€SAFE_Z 5mmã€å…ˆå­”å¾Œå¤–å½¢ï¼‰ã€‚</li>
                            <li>v0.1 ä¸å« tabsï¼šå¤–å½¢åˆ‡å®Œæœƒæ‰ä»¶ï¼Œè«‹ç”¨é›™é¢è† /å£“æ¿å›ºå®šã€‚</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <div class="hd">
                        <h2>ç²—ä¼°å„€è¡¨ï¼ˆSanity Meterï¼‰</h2>
                        <div class="step">è¶Šé«˜è¶Šå®‰å¿ƒ</div>
                    </div>
                    <div class="bd meter">
                        <div class="meterRow">
                            <div class="tag">å¹¾ä½•å¯è¡Œæ€§ï¼ˆæ˜¯å¦å®¹æ˜“çµ„èµ·ä¾†ï¼‰</div>
                            <div class="tag" id="mGeomTxt">â€”</div>
                        </div>
                        <div class="bar">
                            <div id="mGeom"></div>
                        </div>

                        <div class="meterRow" style="margin-top:6px;">
                            <div class="tag">å¯åŠ å·¥æ€§ï¼ˆæ¡¿ä»¶åŒ– / 2.5Dï¼‰</div>
                            <div class="tag" id="mCamTxt">â€”</div>
                        </div>
                        <div class="bar">
                            <div id="mCam"></div>
                        </div>

                        <div class="meterRow" style="margin-top:6px;">
                            <div class="tag">è‡´å‹•åŒ¹é…ï¼ˆæ§åˆ¶é›£åº¦ï¼‰</div>
                            <div class="tag" id="mActTxt">â€”</div>
                        </div>
                        <div class="bar">
                            <div id="mAct"></div>
                        </div>

                        <div class="callout" style="margin-top:10px;">
                            <strong>èªªæ˜</strong>ï¼šé€™äº›ä¸æ˜¯ç²¾ç®—ï¼Œè€Œæ˜¯ã€Œå…ˆæŠŠæ–¹å‘èµ°å°ã€çš„å·¥ç¨‹é˜²å‘†ã€‚<br />
                            ä¹‹å¾Œä½ å¯ä»¥åœ¨æ©Ÿæ§‹é é¢å†åŠ å…¥æ‰­çŸ©/é€Ÿåº¦çš„ç°¡æ˜“ä¼°ç®—ã€‚
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <div class="footer">
            <div><span class="mono">GRBL</span> å»ºè­°ï¼šè¼¸å‡ºå›ºå®šåŒ…å« <span class="mono">G21/G90/G17/G94</span>ï¼Œæ‰€æœ‰ XY ç§»å‹•å‰å…ˆå› <span
                    class="mono">SAFE_Z</span>ï¼Œå…ˆå­”å¾Œå¤–å½¢ï¼Œå¤–å½¢åˆ†å±¤ stepdownã€‚</div>
        </div>
    </div>

    <script>
        // Homepage wizard logic (static-site friendly)
        const state = {
            motion: null,   // swing | linear | recip | translate
            mech: null,     // fourbar | crankslider | parallelogram | rackpinion | leadscrew | cam
            act: null      // motor | servo | pneumatic | stepper
        };

        const motionChips = document.querySelectorAll("#motionChips .chip");
        const mechRecs = document.getElementById("mechRecs");
        const actuatorBox = document.getElementById("actuatorBox");
        const goFourbar = document.getElementById("goFourbar");

        // meters
        const mGeom = document.getElementById("mGeom");
        const mCam = document.getElementById("mCam");
        const mAct = document.getElementById("mAct");
        const mGeomTxt = document.getElementById("mGeomTxt");
        const mCamTxt = document.getElementById("mCamTxt");
        const mActTxt = document.getElementById("mActTxt");

        function setMeter(el, txtEl, val) {
            const v = Math.max(0, Math.min(100, val));
            el.style.width = v + "%";
            txtEl.textContent = v === 0 ? "â€”" : (v + "%");
        }

        function resetAll() {
            state.motion = null;
            state.mech = null;
            state.act = null;
            motionChips.forEach(c => c.classList.remove("active"));
            mechRecs.innerHTML = "";
            actuatorBox.innerHTML = "";
            goFourbar.setAttribute("aria-disabled", "true");
            goFourbar.classList.remove("primary");
            goFourbar.classList.add("ghost");
            goFourbar.style.pointerEvents = "none";
            // meters
            setMeter(mGeom, mGeomTxt, 0);
            setMeter(mCam, mCamTxt, 0);
            setMeter(mAct, mActTxt, 0);
        }

        function mechCard({ id, name, badge, why, pros, cons, cta, href, enabled = true }) {
            const div = document.createElement("div");
            div.className = "recCard";
            div.dataset.mech = id;

            div.innerHTML = `
        <div class="recTop">
          <div class="name">${name}</div>
          <div class="badge">${badge}</div>
        </div>
        <div class="why">${why}</div>
        <div class="kv">
          <div class="box"><strong>é©åˆ</strong>${pros.map(x => `â€¢ ${x}`).join("<br/>")}</div>
          <div class="box"><strong>é¢¨éšª</strong>${cons.map(x => `â€¢ ${x}`).join("<br/>")}</div>
        </div>
        <div class="actions">
          <a class="btn ${enabled ? "primary" : ""}" href="${enabled ? href : "#"}" ${enabled ? "" : "onclick='return false;'"}>
            ${cta}
          </a>
          <button class="btn ghost" data-pick="${id}">é¸é€™å€‹æ©Ÿæ§‹</button>
        </div>
      `;
            return div;
        }

        function renderRecommendations() {
            mechRecs.innerHTML = "";
            actuatorBox.innerHTML = "";
            state.mech = null;
            state.act = null;

            if (!state.motion) return;

            // Recommendations map
            const recs = [];
            if (state.motion === "swing") {
                recs.push({
                    id: "fourbar",
                    name: "å››é€£æ¡¿ï¼ˆ4-barï¼‰",
                    badge: "æ¡¿ä»¶åŒ– â˜…â˜…â˜…â˜…â˜…",
                    why: "æ—‹è½‰è¼¸å…¥ â†’ æ“ºå‹•è¼¸å‡ºï¼›çµæ§‹ç©©ã€å¥½ç®—ã€å¥½åˆ‡ã€åŸå‹æ•ˆç‡æœ€é«˜ï¼ˆä½ ç›®å‰å·²å®Œæˆï¼‰ã€‚",
                    pros: ["å¤¾çˆª/æ“ºè‡‚/æŠ¬å‡å¸¸è¦‹", "2D æ¨¡æ“¬æœ€ç›´è¦º", "æ¡¿ä»¶ CNC åˆ‡å‰²æœ€å‹å–„"],
                    cons: ["ä¸æ˜¯æ¯å€‹è§’åº¦éƒ½å¯è¡Œï¼ˆéœ€å¯è¡Œå€é–“ï¼‰", "open/crossed éœ€é–å®šè§£"],
                    cta: "é€²å…¥å››é€£æ¡¿å·¥å…·",
                    href: "./mechanism.html?type=fourbar",
                    enabled: true
                });
            } else if (state.motion === "linear") {
                recs.push({
                    id: "crankslider",
                    name: "æ›²æŸ„æ»‘å¡Šï¼ˆCrank-Sliderï¼‰",
                    badge: "ç›´ç·šè¡Œç¨‹ â˜…â˜…â˜…â˜…â˜…",
                    why: "æ—‹è½‰ â†’ ç›´ç·šï¼›è¡Œç¨‹æ˜ç¢ºã€æ­»é»å¥½ç†è§£ï¼Œæ¥µé©åˆå¿«é€ŸåŸå‹ã€‚",
                    pros: ["ç›´ç·šæ¨æ‹‰æœ€è‡ªç„¶", "åƒæ•¸å°‘ã€å¥½æ•™"],
                    cons: ["æ­»é»é™„è¿‘åŠ›/é€Ÿåº¦ç‰¹æ€§å·®", "å´å‘åŠ›èˆ‡å°å‘è¦æ³¨æ„"],
                    cta: "ï¼ˆä¸‹ä¸€ç‰ˆï¼‰",
                    href: "#",
                    enabled: false
                });
                recs.push({
                    id: "rackpinion",
                    name: "é½’æ¢é½’è¼ªï¼ˆRack & Pinionï¼‰",
                    badge: "é•·è¡Œç¨‹ â˜…â˜…â˜…â˜…â˜†",
                    why: "è¡Œç¨‹å¯é•·ã€æ•ˆç‡é«˜ï¼Œé©åˆæ»‘å°/å‡é™ã€‚",
                    pros: ["é€Ÿåº¦å¿«", "è¡Œç¨‹å¯æ“´å±•"],
                    cons: ["åŠ å·¥èˆ‡é½’å½¢ç²¾åº¦è¦æ±‚", "èƒŒéš™èˆ‡å®šä½è¦è™•ç†"],
                    cta: "ï¼ˆé€²éšï¼‰",
                    href: "#",
                    enabled: false
                });
            } else if (state.motion === "recip") {
                recs.push({
                    id: "crankslider",
                    name: "æ›²æŸ„æ»‘å¡Šï¼ˆCrank-Sliderï¼‰",
                    badge: "å¾€å¾©æœ€ä½³ â˜…â˜…â˜…â˜…â˜…",
                    why: "å¤©ç”Ÿå¾€å¾©ï¼›æœ€å°‘é›¶ä»¶å°±èƒ½åšå‡ºé€±æœŸæ¨æ‹‰ã€‚",
                    pros: ["æœ€ç°¡å–®å¾€å¾©", "å®¹æ˜“åšå‡ºç¯€å¥"],
                    cons: ["æ­»é»æ•ˆæ‡‰", "éœ€è¦å°è»Œé¿å…åè¼‰"],
                    cta: "ï¼ˆä¸‹ä¸€ç‰ˆï¼‰",
                    href: "#",
                    enabled: false
                });
                recs.push({
                    id: "cam",
                    name: "å‡¸è¼ªï¼ˆCamï¼‰",
                    badge: "ç¯€å¥å›ºå®š â˜…â˜…â˜…â˜†â˜†",
                    why: "æƒ³è¦å›ºå®šç¯€å¥çš„å‹•ä½œï¼ˆé€æ–™/åˆ†åº¦ï¼‰å¯ä»¥è€ƒæ…®å‡¸è¼ªã€‚",
                    pros: ["ç¯€å¥å¯è¨­è¨ˆ", "é‡è¤‡æ€§é«˜"],
                    cons: ["è¼ªå»“è¨­è¨ˆèˆ‡åŠ å·¥è¼ƒè¤‡é›œ", "ä¸å¤ªé©åˆç¬¬ä¸€ç‰ˆåŸå‹"],
                    cta: "ï¼ˆé€²éšï¼‰",
                    href: "#",
                    enabled: false
                });
            } else if (state.motion === "translate") {
                recs.push({
                    id: "leadscrew",
                    name: "èºæ¡¿æ»‘å°ï¼ˆLead Screwï¼‰",
                    badge: "å®šä½ç©© â˜…â˜…â˜…â˜…â˜†",
                    why: "å®šä½å¥½ã€ç›¸å°å¥½æ§åˆ¶ï¼›é©åˆéœ€è¦æº–åº¦çš„å¹³ç§»ã€‚",
                    pros: ["å®šä½å®¹æ˜“", "æ§åˆ¶ç°¡å–®"],
                    cons: ["é€Ÿåº¦è¼ƒæ…¢", "é•·è¡Œç¨‹æ•ˆç‡å·®"],
                    cta: "ï¼ˆé€²éšï¼‰",
                    href: "#",
                    enabled: false
                });
                recs.push({
                    id: "belt",
                    name: "çš®å¸¶æ»‘å°ï¼ˆBelt Driveï¼‰",
                    badge: "é€Ÿåº¦å¿« â˜…â˜…â˜…â˜…â˜†",
                    why: "é€Ÿåº¦å¿«ã€è¡Œç¨‹é•·ï¼›é©åˆå¤§è¡Œç¨‹å¹³ç§»ã€‚",
                    pros: ["é€Ÿåº¦é«˜", "è¡Œç¨‹é•·"],
                    cons: ["å®šä½/å½ˆæ€§éœ€è£œå„Ÿ", "çµæ§‹å¼µåŠ›è¦é¡§"],
                    cta: "ï¼ˆé€²éšï¼‰",
                    href: "#",
                    enabled: false
                });
            }

            recs.forEach(r => mechRecs.appendChild(mechCard(r)));

            // Listen pick buttons
            mechRecs.querySelectorAll("button[data-pick]").forEach(btn => {
                btn.addEventListener("click", () => {
                    state.mech = btn.dataset.pick;
                    renderActuatorDecision();
                    updateMeters();
                    updatePrimaryCTA();
                    // highlight selected
                    mechRecs.querySelectorAll(".recCard").forEach(c => c.style.borderColor = "rgba(255,255,255,.10)");
                    const picked = mechRecs.querySelector(`.recCard[data-mech="${state.mech}"]`);
                    if (picked) picked.style.borderColor = "rgba(25,195,125,.55)";
                });
            });

            updateMeters();
            updatePrimaryCTA();
        }

        function renderActuatorDecision() {
            actuatorBox.innerHTML = "";
            if (!state.motion) return;

            // Simple decision UI: 3 questions collapsed into quick picks
            const div = document.createElement("div");
            div.className = "recCard";
            div.innerHTML = `
        <div class="recTop">
          <div class="name">è‡´å‹•å™¨é¸æ“‡ï¼ˆå¿«é€Ÿæ±ºç­–ï¼‰</div>
          <div class="badge">å…ˆå¯æ§ï¼Œå†è®Šå¼·</div>
        </div>
        <div class="why">
          å…ˆé¸æ§åˆ¶å‹æ…‹ï¼š<b>é€£çºŒå¯æ§</b>ï¼ˆå®šä½/è®Šé€Ÿï¼‰æˆ– <b>å…©æ®µå¼</b>ï¼ˆæ¨åˆ°åº•/æ”¾é–‹ï¼‰ã€‚
          å†çœ‹ä½ è¦çš„æ˜¯è§’åº¦å®šä½ã€ä½ç½®å®šä½ã€é‚„æ˜¯ç´”åŠ›é‡/é€Ÿåº¦ã€‚
        </div>
        <div class="chips" style="margin-top:8px;">
          <div class="chip" data-act="servo">
            <div class="t">ğŸ§© èˆµæ©Ÿ</div>
            <div class="d">æœ€ç›´è¦ºè§’åº¦å®šä½ï¼›é©åˆæ•™å­¸é—œç¯€ã€å¤¾çˆªé©…å‹•</div>
          </div>
          <div class="chip" data-act="motor">
            <div class="t">âš™ï¸ DC æ¸›é€Ÿé¦¬é”</div>
            <div class="d">é€Ÿåº¦/åŠ›é‡å½ˆæ€§å¤§ï¼›é©åˆé€£çºŒå‹•ä½œï¼ˆéœ€å›æˆæ›´ç©©ï¼‰</div>
          </div>
          <div class="chip" data-act="stepper">
            <div class="t">ğŸŸ¦ æ­¥é€²é¦¬é”</div>
            <div class="d">å®šä½ç©©ã€æ§åˆ¶ç°¡å–®ï¼›é€Ÿåº¦è¼ƒä¿å®ˆï¼Œé©åˆæ»‘å°/æ…¢é€Ÿæ©Ÿæ§‹</div>
          </div>
          <div class="chip" data-act="pneumatic">
            <div class="t">ğŸŸ¨ æ°£å£“</div>
            <div class="d">å…©æ®µå¼ã€åŠ›å¤§ï¼›é©åˆå¿«é€Ÿå¤¾ç·Š/æ¨æ–™ï¼ˆæ§åˆ¶æ˜¯ ON/OFFï¼‰</div>
          </div>
        </div>
        <div class="callout" style="margin-top:10px;">
          <strong>å·¥ç¨‹æé†’</strong>ï¼šåŸå‹å…ˆé¸ã€Œå¯é æœŸã€çš„è‡´å‹•å™¨ã€‚è¶Šå¼·è¶Šå®¹æ˜“æ’å£æ©Ÿæ§‹ï¼›å…ˆæŠŠå¹¾ä½•èˆ‡è¡Œç¨‹åšé †ã€‚
        </div>
      `;
            actuatorBox.appendChild(div);

            // wire chips
            actuatorBox.querySelectorAll(".chip").forEach(ch => {
                ch.addEventListener("click", () => {
                    actuatorBox.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
                    ch.classList.add("active");
                    state.act = ch.dataset.act;
                    updateMeters();
                });
            });
        }

        function updatePrimaryCTA() {
            // enable going to fourbar only when motion chosen and recommended mech is fourbar OR user picked fourbar
            const ok = (state.motion === "swing") && (state.mech === "fourbar" || state.mech === null);
            // If user hasn't picked a mech yet but motion is swing, still allow the fourbar tool
            const allow = (state.motion === "swing");
            if (allow) {
                goFourbar.style.pointerEvents = "auto";
                goFourbar.setAttribute("aria-disabled", "false");
                goFourbar.classList.add("primary");
                goFourbar.classList.remove("ghost");
            } else {
                goFourbar.style.pointerEvents = "none";
                goFourbar.setAttribute("aria-disabled", "true");
                goFourbar.classList.remove("primary");
                goFourbar.classList.add("ghost");
            }
        }

        function updateMeters() {
            // quick heuristics, not physics
            let geom = 0, cam = 0, act = 0;

            if (!state.motion) {
                setMeter(mGeom, mGeomTxt, 0);
                setMeter(mCam, mCamTxt, 0);
                setMeter(mAct, mActTxt, 0);
                return;
            }

            // geometry feasibility
            if (state.motion === "swing") geom = 85;
            if (state.motion === "linear") geom = 75;
            if (state.motion === "recip") geom = 70;
            if (state.motion === "translate") geom = 65;

            // CAM friendliness (prototype)
            if (state.motion === "swing") cam = 90;       // link-based
            if (state.motion === "linear") cam = 85;      // crank-slider link parts
            if (state.motion === "recip") cam = 80;
            if (state.motion === "translate") cam = 70;   // more rails/belts etc.

            // actuator match (control difficulty)
            // servo easiest for swing; stepper decent for translate; pneumatic is simple but limited
            if (!state.act) act = 0;
            else if (state.act === "servo") act = (state.motion === "swing") ? 90 : 70;
            else if (state.act === "motor") act = 75;
            else if (state.act === "stepper") act = (state.motion === "translate") ? 85 : 75;
            else if (state.act === "pneumatic") act = 70;

            // if user chose a specific mechanism, tweak a bit
            if (state.mech === "fourbar") { geom = 88; cam = 92; }
            if (state.mech === "crankslider") { geom = 78; cam = 88; }
            if (state.mech === "cam") { geom = 70; cam = 55; }

            setMeter(mGeom, mGeomTxt, geom);
            setMeter(mCam, mCamTxt, cam);
            setMeter(mAct, mActTxt, act);
        }

        // Motion chip click
        motionChips.forEach(ch => {
            ch.addEventListener("click", () => {
                motionChips.forEach(c => c.classList.remove("active"));
                ch.classList.add("active");
                state.motion = ch.dataset.motion;
                renderRecommendations();
                renderActuatorDecision();
                updateMeters();
                updatePrimaryCTA();
            });
        });

        document.getElementById("resetBtn").addEventListener("click", resetAll);

        // Initialize
        resetAll();
    </script>
</body>

</html>