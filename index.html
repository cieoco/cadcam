<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>4-Bar Linkage â†’ Parts â†’ GRBL G-code (MVP)</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Arial; margin: 16px; }
    h1 { margin: 0 0 12px; }
    .row { display: grid; grid-template-columns: 380px 1fr; gap: 16px; align-items: start; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 12px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    label { font-size: 12px; color: #333; display: block; margin-bottom: 4px; }
    input, select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 8px; }
    button { padding: 10px 12px; border-radius: 10px; border: 1px solid #bbb; cursor: pointer; }
    button.primary { border-color: #333; }
    .btnrow { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
    .note { font-size: 12px; color: #555; line-height: 1.4; }
    .warn { color: #a00; font-weight: 600; }
    #svgWrap { border: 1px solid #ddd; border-radius: 10px; padding: 8px; background: #fff; }
    #svgWrap svg { max-width: 100%; height: auto; display: block; }
    #partsWrap svg { max-width: 100%; height: auto; display: block; }
    #log { white-space: pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
  </style>
</head>
<body>
  <div class="row">
    <div class="card">
      <h3>â‘  å››é€£æ¡¿åƒæ•¸ï¼ˆmmï¼‰</h3>
      <div class="grid">
        <div>
          <label><span style="color:#666; font-weight:bold;">Ground a</span> (O2-O4)</label>
          <input id="a" type="number" min="10" max="250" step="1" value="120" />
        </div>
        <div>
          <label><span style="color:#e74c3c; font-weight:bold;">Input b</span> (O2-A)</label>
          <input id="b" type="number" min="10" max="250" step="1" value="60" />
        </div>
        <div>
          <label><span style="color:#3498db; font-weight:bold;">Coupler c</span> (A-B)</label>
          <input id="c" type="number" min="10" max="250" step="1" value="110" />
        </div>
        <div>
          <label><span style="color:#27ae60; font-weight:bold;">Output d</span> (B-O4)</label>
          <input id="d" type="number" min="10" max="250" step="1" value="80" />
        </div>
      </div>

      <div style="height:10px"></div>
      <h3>â‘¡ æ¨¡æ“¬è¨­å®š</h3>
      <div class="grid">
        <div>
          <label>è§£å‹æ…‹ï¼ˆopen/crossedï¼‰</label>
          <select id="assembly">
            <option value="open">openï¼ˆå¸¸è¦‹ï¼‰</option>
            <option value="crossed">crossedï¼ˆäº¤å‰ï¼‰</option>
          </select>
        </div>
        <div>
          <label>è¼¸å…¥è§’ Î¸ï¼ˆåº¦ï¼‰</label>
          <input id="theta" type="number" min="-180" max="180" step="1" value="30" />
        </div>
        <div>
          <label>æ¨¡æ“¬åœ–ç¯„åœï¼ˆmmï¼‰</label>
          <input id="viewRange" type="number" min="100" max="1000" step="10" value="400" />
        </div>
        <div>
          <label>
            <input type="checkbox" id="showGrid" checked /> é¡¯ç¤ºæ ¼ç·š
          </label>
        </div>
      </div>

      <div style="height:10px"></div>
      <h3>â‘¡ - B Input b é©…å‹•è¨­å®šï¼ˆé¦¬é”/èˆµæ©Ÿï¼‰</h3>
      <div class="grid">
        <div style="grid-column: 1 / -1;">
          <label>Input b é©…å‹•é¡å‹ï¼ˆæ§åˆ¶ç´…è‰²è¼¸å…¥æ¡¿ï¼‰</label>
          <select id="motorType">
            <option value="motor360">ğŸ”„ é¦¬é”ï¼ˆ360Â° å…¨æ—‹è½‰ï¼‰</option>
            <option value="servo180">â†”ï¸ èˆµæ©Ÿï¼ˆ0Â° ~ 180Â°ï¼‰</option>
            <option value="servo270">â†”ï¸ èˆµæ©Ÿï¼ˆ-135Â° ~ 135Â°ï¼‰</option>
            <option value="custom">âš™ï¸ è‡ªè¨‚ç¯„åœ</option>
          </select>
        </div>
        <div>
          <label>Î¸ èµ·å§‹è§’åº¦ï¼ˆåº¦ï¼‰</label>
          <input id="sweepStart" type="number" min="-180" max="180" step="1" value="-180" />
        </div>
        <div>
          <label>Î¸ çµæŸè§’åº¦ï¼ˆåº¦ï¼‰</label>
          <input id="sweepEnd" type="number" min="-180" max="180" step="1" value="180" />
        </div>
        <div>
          <label>Î¸ æƒæé–“éš”ï¼ˆåº¦ï¼‰</label>
          <input id="sweepStep" type="number" min="1" max="10" step="1" value="1" />
        </div>
        <div>
          <label>
            <input type="checkbox" id="showTrajectory" checked /> ç–ŠåŠ è»Œè·¡åˆ°2Dåœ–
          </label>
        </div>
      </div>
      <div class="grid" style="margin-top:8px;">
        <div>
          <label>å‹•ç•«é€Ÿåº¦ï¼ˆRPMï¼‰</label>
          <input id="animSpeed" type="number" min="1" max="120" step="1" value="10" />
        </div>
        <div style="display:flex; align-items:flex-end; gap:4px;">
          <button id="btnPlayAnim" style="flex:1; background:#27ae60; color:white; border:none;">â–¶ æ’­æ”¾</button>
          <button id="btnPauseAnim" style="flex:1; background:#f39c12; color:white; border:none;" disabled>â¸ æš«åœ</button>
          <button id="btnStopAnim" style="flex:1; background:#e74c3c; color:white; border:none;" disabled>â¹ åœæ­¢</button>
        </div>
      </div>

      <div style="height:10px"></div>
      <h3>â‘¢ æ¡¿ä»¶å¤–å½¢ï¼ˆç›´æ¡¿ï¼‰</h3>
      <div class="grid">
        <div>
          <label>æ¡¿ä»¶å¯¬ Wï¼ˆmmï¼‰</label>
          <input id="barW" type="number" min="6" max="40" step="1" value="15" />
        </div>
        <div>
          <label>ç«¯åˆ°å­”ä¸­å¿ƒé‚Šè· marginï¼ˆmmï¼‰</label>
          <input id="margin" type="number" min="4" max="20" step="0.5" value="7" />
        </div>
        <div>
          <label>å­”å¾‘ï¼ˆmmï¼‰</label>
          <input id="holeD" type="number" min="2.5" max="8" step="0.1" value="3.2" />
        </div>
        <div>
          <label>é›¶ä»¶é–“è· spacingï¼ˆmmï¼‰</label>
          <input id="spacing" type="number" min="2" max="20" step="1" value="8" />
        </div>
      </div>

      <div style="height:10px"></div>
      <h3>â‘£ åŠ å·¥è¨­å®šï¼ˆGRBL / æœ¨æ¿å®‰å…¨å€¼ï¼‰</h3>
      <div class="grid">
        <div>
          <label>å·¥ä½œç¯„åœ Xï¼ˆmmï¼‰</label>
          <input id="workX" type="number" value="300" />
        </div>
        <div>
          <label>å·¥ä½œç¯„åœ Yï¼ˆmmï¼‰</label>
          <input id="workY" type="number" value="180" />
        </div>
        <div>
          <label>åˆ€å¾‘ï¼ˆmmï¼‰</label>
          <input id="toolD" type="number" min="0.5" max="10" step="0.1" value="3.0" />
        </div>
        <div>
          <label>ææ–™åšåº¦ Tï¼ˆmmï¼‰</label>
          <input id="thickness" type="number" min="1" max="30" step="0.1" value="3.0" />
        </div>
        <div>
          <label>ç©¿é€é¤˜é‡ï¼ˆmmï¼‰</label>
          <input id="overcut" type="number" min="0" max="2" step="0.1" value="0.5" />
        </div>
        <div>
          <label>æ¯å±¤ä¸‹åˆ€ stepdownï¼ˆmmï¼‰</label>
          <input id="stepdown" type="number" min="0.1" max="5" step="0.1" value="0.5" />
        </div>
        <div>
          <label>SAFE_Zï¼ˆmmï¼‰</label>
          <input id="safeZ" type="number" min="1" max="30" step="0.5" value="5" />
        </div>
        <div>
          <label>Feed XYï¼ˆmm/minï¼‰</label>
          <input id="feedXY" type="number" min="50" max="3000" step="10" value="400" />
        </div>
        <div>
          <label>Feed Zï¼ˆmm/minï¼‰</label>
          <input id="feedZ" type="number" min="30" max="2000" step="10" value="100" />
        </div>
        <div>
          <label>ä¸»è»¸ Sï¼ˆå¯ç©ºç™½ï¼‰</label>
          <input id="spindle" type="number" min="1000" max="30000" step="100" placeholder="ä¾‹å¦‚ 12000ï¼ˆä¸å¡«å‰‡ä¸è¼¸å‡º M3/M5ï¼‰" />
        </div>
      </div>

      <div class="btnrow">
        <button id="btnGen">ç”Ÿæˆ G-codeï¼ˆ4 æ ¹æ¡¿ä»¶ï¼‰</button>
      </div>

      <div style="height:10px"></div>
      <div class="note">
        <div class="warn">æ³¨æ„ï¼šv0.1 ä¸å« tabsã€‚å¤–å½¢åˆ‡å®Œé›¶ä»¶å¯èƒ½é¬†è„«ï¼Œè«‹ç”¨é›™é¢è† /å£“æ¿å›ºå®šã€‚</div>
        <div>é è¨­ï¼šG21 / G90 / SAFE_Z å…ˆæŠ¬åˆ€ã€å…ˆé‘½å­”å¾Œå¤–å½¢ã€å¤šå±¤ stepdownã€‚</div>
      </div>

      <div style="height:10px"></div>
      <h3>è¼¸å‡º / è¨Šæ¯</h3>
      <div id="log" class="card" style="padding:10px; background:#fafafa;"></div>
      <div class="btnrow" id="dlButtons"></div>
    </div>

    <div>
      <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <h3 style="margin:0;">2D æ¨¡æ“¬ï¼ˆå››é€£æ¡¿ï¼‰</h3>
          <button class="primary" id="btnUpdate">æ›´æ–°æ¨¡æ“¬ / é è¦½</button>
        </div>
        <div id="svgWrap"></div>
        <div class="note" style="margin-top:8px;">
          é¡¯ç¤ºï¼šO2ï¼ˆå·¦å›ºå®šé»ï¼‰ã€O4ï¼ˆå³å›ºå®šé»ï¼‰ã€Aï¼ˆinput ç«¯ï¼‰ã€Bï¼ˆcoupler/output ç«¯ï¼‰ã€‚<br/>
          è‹¥å¹¾ä½•ç„¡è§£ï¼Œæœƒæç¤ºã€Œæ­¤è§’åº¦ä¸å¯è¡Œã€ã€‚<br/>
          <strong style="color:#e74c3c;">ç´…è‰²æ¡¿ = Input bï¼ˆç”±é¦¬é”/èˆµæ©Ÿé©…å‹•ï¼‰</strong>
        </div>
      </div>

      <div class="card" style="margin-top:16px;">
        <h3>é›¶ä»¶æ’ç‰ˆé è¦½ï¼ˆåœ¨ 3018 å·¥ä½œç¯„åœå…§ï¼‰</h3>
        <div id="partsWrap"></div>
        <div class="note" style="margin-top:8px;">
          é€™è£¡æ˜¯æŠŠ 4 æ ¹ç›´æ¡¿æ“ºåœ¨åŒä¸€å¼µå·¥ä½œå€ï¼ˆ0..X, 0..Yï¼‰ï¼Œæ¯æ ¹å„è‡ªè¼¸å‡ºä¸€ä»½ G-codeï¼ˆåæ¨™ä¸€è‡´ï¼‰ã€‚
        </div>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
